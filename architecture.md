┌─────────────────────────────────────────────────────────────────────────────────┐
│                            SYSTEM ARCHITECTURE                                  │
├─────────────────────────────────────────────────────────────────────────────────┤
│                                                                                 │
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                         INFRASTRUCTURE LAYER                            │   │
│  │  ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐ ┌───────────┐  │   │
│  │  │  Redis    │ │ PostgreSQL│ │  Qdrant   │ │  Logging  │ │   MCP     │  │   │
│  │  │  Cache    │ │    DB     │ │  Vector   │ │ (Loguru)  │ │  Servers  │  │   │
│  │  │  + STM    │ │  + LTM    │ │    DB     │ │           │ │           │  │   │
│  │  └───────────┘ └───────────┘ └───────────┘ └───────────┘ └───────────┘  │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
│                                      │                                         │
│  ┌─────────────────────────────────────────────────────────────────────────┐   │
│  │                         ORCHESTRATION LAYER                             │   │
│  │                                                                         │   │
│  │                         ┌──────────────┐                                │   │
│  │                         │    ROUTER    │                                │   │
│  │                         │  Hybrid:     │                                │   │
│  │                         │  Keywords +  │                                │   │
│  │                         │  LLM Fallback│                                │   │
│  │                         └──────┬───────┘                                │   │
│  │                                │                                        │   │
│  │         ┌──────────────────────┼──────────────────────┐                 │   │
│  │         ▼                      ▼                      ▼                 │   │
│  │  ┌─────────────┐       ┌─────────────┐       ┌─────────────┐            │   │
│  │  │   CRYPTO    │       │   FETCHER   │       │  TRADING    │            │   │
│  │  │   AGENT     │       │   AGENT     │       │    A2A      │──────┐     │   │
│  │  └──────┬──────┘       └──────┬──────┘       └─────────────┘      │     │   │
│  │         │                     │                                   │     │   │
│  │         └──────────┬──────────┘                                   │     │   │
│  │                    ▼                                              │     │   │
│  │             ┌─────────────┐                                       │     │   │
│  │             │   ANALYST   │                                       │     │   │
│  │             └──────┬──────┘                                       │     │   │
│  │                    │                                              │     │   │
│  │                    ▼                                              │     │   │
│  │             ┌─────────────┐                                       │     │   │
│  │             │  COMPOSER   │◄──────────────────────────────────────┘     │   │
│  │             └─────────────┘                                             │   │
│  └─────────────────────────────────────────────────────────────────────────┘   │
│                                                                                │
│  ┌─────────────────────────────────────────────────────────────────────────┐  │
│  │                    A2A: TRADING AGENTS SUB-GRAPH                        │  │
│  │  ┌───────────────────────────────────────────────────────────────────┐ │  │
│  │  │                    ANALYSTS TEAM (Parallel)                        │ │  │
│  │  │  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ ┌─────────────┐ │ │  │
│  │  │  │ Fundamental │ │  Sentiment  │ │    News     │ │  Technical  │ │ │  │
│  │  │  │   Analyst   │ │   Analyst   │ │   Analyst   │ │   Analyst   │ │ │  │
│  │  │  │             │ │ (News-based)│ │             │ │             │ │ │  │
│  │  │  │ • Fin-Data  │ │ • LLM on    │ │ • Finnhub   │ │ • Calculate │ │ │  │
│  │  │  │ • Alpha     │ │   news      │ │ • Yahoo     │ │ • TA-Lib    │ │ │  │
│  │  │  │ • Yahoo MCP │ │             │ │             │ │             │ │ │  │
│  │  │  └─────────────┘ └─────────────┘ └─────────────┘ └─────────────┘ │ │  │
│  │  └───────────────────────────────────────────────────────────────────┘ │  │
│  │                                 │                                       │  │
│  │                                 ▼                                       │  │
│  │  ┌───────────────────────────────────────────────────────────────────┐ │  │
│  │  │                    RESEARCH TEAM (Debate - 3 rounds)              │ │  │
│  │  │         ┌──────────┐                      ┌──────────┐            │ │  │
│  │  │         │  BULL    │◄────── Debate ──────►│  BEAR    │            │ │  │
│  │  │         │Researcher│      (3 rounds)      │Researcher│            │ │  │
│  │  │         └──────────┘                      └──────────┘            │ │  │
│  │  └───────────────────────────────────────────────────────────────────┘ │  │
│  │                                 │                                      │  │
│  │                                 ▼                                      │  │
│  │  ┌───────────────────────────────────────────────────────────────────┐ │  │
│  │  │                         TRADER                                    │ │  │
│  │  │                  (BUY / SELL / HOLD)                              │ │  │
│  │  └───────────────────────────────────────────────────────────────────┘ │  │
│  │                                 │                                      │  │
│  │                                 ▼                                      │  │
│  │  ┌───────────────────────────────────────────────────────────────────┐ │  │
│  │  │                RISK MANAGEMENT (Debate - 3 rounds)                │ │  │
│  │  │    ┌─────────┐         ┌─────────┐         ┌─────────┐            │ │  │
│  │  │    │  RISKY  │◄───────►│ NEUTRAL │◄───────►│  SAFE   │            │ │  │
│  │  │    └─────────┘         └─────────┘         └─────────┘            │ │  │
│  │  └───────────────────────────────────────────────────────────────────┘ │  │
│  │                                 │                                      │  │
│  │                                 ▼                                      │  │
│  │  ┌───────────────────────────────────────────────────────────────────┐ │  │
│  │  │                       FUND MANAGER                                │ │  │
│  │  │                    (Final Approval)                               │ │  │
│  │  └───────────────────────────────────────────────────────────────────┘ │  │
│  └────────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────────────────┐ │
│  │                         PRESENTATION LAYER                              │ │
│  │                           (Streamlit UI)                                │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
└────────────────────────────────────────────────────────────────────────────────┘